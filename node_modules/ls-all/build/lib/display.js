'use strict';

var colors = require('colors/safe');
var basename = require('path').basename;
var fullPath = false;
var identChar = ' ';
var identSize = 2;

function getFileColor(file) {
  if (file.mode.dir) {
    return colors.blue.bold;
  } else if (file.mode.exec) {
    return colors.red.bold;
  } else {
    return colors.black;
  }
}

function printFile(file, spaces) {
  var color = getFileColor(file);
  var ident = identChar.repeat(spaces);
  var name = fullPath ? file.path : basename(file.path);
  var msg = color(name);

  console.log('' + ident + msg);
}

module.exports = function displayFiles(files, spaces) {
  files.forEach(function (file) {
    printFile(file, spaces);
    if (file.files && file.files.length > 0) {
      displayFiles(file.files, spaces + identSize);
    }
  });
};