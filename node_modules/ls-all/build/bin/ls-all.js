#!/usr/bin/env node

'use strict';

var meow = require('meow');
var list = require('../lib/list');
var display = require('../lib/display');

var cli = meow({
  help: '\n  Usage\n    $ ls-all [options] ...folders\n\n    Options\n    -f, --flatten\n    -r, --recurse\n\n  Examples\n    $ ls-all ./folder-1 ./folder-2\n      folder-1:\n        file-1\n        file-2\n' }, {
  alias: {
    r: 'recurse',
    f: 'flatten'
  },
  default: {
    r: false,
    f: false
  }
});

if (cli.input.length === 0) {
  cli.input.push('.');
}

list(cli.input, cli.flags).then(function (files) {
  display(files, 0);
}).catch(function (err) {
  console.log('Error', err.message);
});